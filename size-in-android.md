title: Android布局中的尺寸单位介绍
date: 2015-11-09
tags: [Android, 布局]
categories: Android
---
简介：很多刚开始接触Android开发的初学者，虽然会做些简单布局，但是却不明白其深层的意思，只是把布局文件写完了，在真机上调试看到样子就觉得完事了。也不会管这种布局方式是否在其他屏幕手机上合适。这篇文章先从一个最基本的小点入手，主要介绍下Android工程目录下的mdpi、hdpi等目录的意义，和它们与开发中所用到的一些基本单位如sp、dp等的关系。

在介绍开发上的知识之前
我们先了解下市面上一些手机规格里面所表达的意义。

以下用荣耀6 plus的屏幕参数作为例子讲解这些参数之间的关系。
![honor 6 plus参数](http://upload-images.jianshu.io/upload_images/1362430-89dcf9b42412082c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
英寸(inch) 1 inch = 2.54 cm

主屏尺寸：也就是主要显示屏幕对角线的距离
屏幕像素密度：ppi（pixels per inch ），意思是，每英寸所含有的像素数量；
主屏分辨率：1920x1080像素表示屏幕高度上有1920个像素点，宽度上有1080个像素点；

以上三个参数是有一定关系的，
因为对角线是5.5英寸，因像素相对于英寸足够小，我们可以根据勾股定理，计算出对角线上大约有2202.907像素
再用这个像素数除以5.5英寸大致得到像素密度为：400.528， 约等于401。所以此处屏幕像素密度为：401ppi

以上是市面上手机的一些参数，而作为Android开发人员，则经常会和以下几个单位打交道：
px ： one pixel (像素)
dip ：Density-independent pixels(密度无关像素，也可以简写成：dp，代表 1/160 inch，一般都会使用这个单位进行布局)
sp ：scale-independent pixels(拉升无关像素，与dp计算规则一致，区别是大小会根据系统设定而变，一般用在字体大小上)
还有两个 ：一个是mm 表示毫米，另一个是pt表示点 1/72 inch，开发中不经常用到，这里不做详细介绍。

手机屏幕多种多样，规格各不相同，Android为保证开发者能开发出适配不同屏幕的应用，它把不同屏幕密度做了以下划分；

![规格](http://upload-images.jianshu.io/upload_images/1362430-d0b1aa50729b6f10.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
注意这里的dpi 和ppi某种程度上来说其实是一样的东西。每一种手机都有一个自己ppi，但我们在编程时，这个手机的屏幕就会对应到我们所说的某个dpi，Android程序框架为了方便处理只定义了几种dpi规格，某款手机在知道ppi后，向上找到最接近的dpi作为标准。如下一段代码我们经常用来打印设备密度，来进行不同机型的屏幕适配。
```
Resources.getSystem().getDisplayMetrics().density
Resources.getSystem().getDisplayMetrics().densityDpi
```

在Nexus 6P中我们会得到`density = 3.5`，`densityDpi = 560`，而上网查找Nexus6P手机我们可以知道它的PPI为515，所以它对应到了xxxhdpi这个范围上。3.5就是560 / 160所得。

**注：其中mdpi也叫normal size，是第一款基于Android的手机 HTC T-Mobile G1手机的分辨率大小，Android直到 1.6版本才可以支持不同分辨率的屏幕。**

这里我们举个例子说明，Android应用在工作时如何展示和选择素材：
如果我们开发时，把一个 10x10 像素的图片放到mdpi的素材目录下，布局设置为wrap_content；则这个图片会在手机上占用 (1/16 x 1/16) inch 的空间。这时候同样的一张图片如果运行在不同ppi的手机上，则会不一样，因为虽然在手机上占用的屏幕尺寸一样，但是这个尺寸所包含的像素数量不一样。在高ppi手机上这张图片可能会有模糊；
同样如果你把这个10x10像素的图片放到了hdpi目录下，则这个图片就会占用：(1/24 x 1/24)inch的大小，同样的图片则显示的就会更小，也会更精致。因为在同样的尺寸下包含了更多的像素。

这样你就可以根据需要适配机型的物理长宽尺寸，来选择把不同的素材放到不同的文件夹里，以达到最好的显示；

那如果每个文件夹下都有这一张不同分辨率的图片，应用在运行时，Android系统会选择最接近改密度的文件夹目录下的素材，比如上面提到的荣耀 6 plus的401ppi，它向上接近480dpi，所以系统会优先为它选择xxhdpi目录下的素材。
